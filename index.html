<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADR Factory - Ù…ØµÙ†Ø¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        body { font-family: 'Tajawal', sans-serif; }
        .markdown-preview { background-color: #f9fafb; border: 1px solid #e5e7eb; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen pb-12">

    <!-- Header -->
    <header class="bg-indigo-700 text-white py-8 shadow-lg mb-8">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-3xl font-bold mb-2">ğŸ—ï¸ ADR Factory</h1>
            <p class="text-indigo-100 italic">Ù‚Ù… Ø¨Ø¨Ù†Ø§Ø¡ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø¨Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙˆØ³Ù‡ÙˆÙ„Ø©</p>
        </div>
    </header>

    <main class="container mx-auto px-4 grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <!-- Input Form Section -->
        <section class="bg-white p-6 rounded-xl shadow-md">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-gray-800">
                <span>ğŸ“</span> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„ØªÙ‚Ù†ÙŠ
            </h2>
            
            <form id="adrForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø±Ø§Ø±</label>
                    <input type="text" id="title" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù… Microservices Ù„Ù„Ø·Ù„Ø¨Ø§Øª" 
                        class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ø±Ù‚Ù… Ø§Ù„Ù‚Ø±Ø§Ø±</label>
                        <input type="number" id="id" value="1" 
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„Ø­Ø§Ù„Ø©</label>
                        <select id="status" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none">
                            <option value="Proposed">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ (Proposed)</option>
                            <option value="Accepted" selected>Ù…Ù‚Ø¨ÙˆÙ„ (Accepted)</option>
                            <option value="Superseded">Ù…ÙØ³ØªØ¨Ø¯Ù„ (Superseded)</option>
                            <option value="Deprecated">Ù…ÙÙ„ØºÙ‰ (Deprecated)</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ† ÙÙŠ Ø§Ù„Ù‚Ø±Ø§Ø±</label>
                    <input type="text" id="deciders" placeholder="Ù…Ø«Ù„Ø§Ù‹: ÙØ±ÙŠÙ‚ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©ØŒ Ø£Ø­Ù…Ø¯ØŒ Ø³Ø§Ø±Ø©" 
                        class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„Ø³ÙŠØ§Ù‚ (Context)</label>
                    <textarea id="context" rows="3" placeholder="Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø£Ùˆ Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ" 
                        class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„Ù…ØªØ®Ø° (Decision)</label>
                    <textarea id="decision" rows="3" placeholder="Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø³Ù†ÙØ¹Ù„Ù‡ Ø¨Ø§Ù„Ø¶Ø¨Ø·ØŸ" 
                        class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„Ù…Ø¨Ø±Ø±Ø§Øª (Rationale)</label>
                    <textarea id="rationale" rows="3" placeholder="Ù„Ù…Ø§Ø°Ø§ Ø§Ø®ØªØ±Ù†Ø§ Ù‡Ø°Ø§ Ø§Ù„Ø­Ù„ØŸ" 
                        class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„ØªØ¨Ø¹Ø§Øª ÙˆØ§Ù„Ø¹ÙˆØ§Ù‚Ø¨ (Consequences)</label>
                    <textarea id="consequences" rows="3" placeholder="Ù…Ø§Ø°Ø§ Ø³ÙŠØ­Ø¯Ø« Ø¨Ø¹Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ (Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ§Øª ÙˆØ³Ù„Ø¨ÙŠØ§Øª)" 
                        class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                </div>
            </form>
        </section>

        <!-- Preview & Export Section -->
        <section class="flex flex-col gap-4">
            <div class="bg-white p-6 rounded-xl shadow-md flex-grow">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold flex items-center gap-2 text-gray-800">
                        <span>ğŸ“„</span> Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© (Markdown)
                    </h2>
                    <div class="flex gap-2">
                        <button onclick="copyToClipboard()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded text-sm transition">Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>
                        <button onclick="downloadADR()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1 rounded text-sm transition font-bold">ØªØ­Ù…ÙŠÙ„ .md</button>
                    </div>
                </div>

                <div id="previewArea" class="markdown-preview p-4 rounded-md overflow-auto max-h-[600px] text-left dir-ltr whitespace-pre-wrap font-mono text-sm border-2 border-dashed border-gray-200">
<!-- Generated Content Here -->
                </div>
            </div>

            <!-- Helpful Tip -->
            <div class="bg-yellow-50 border-r-4 border-yellow-400 p-4 rounded">
                <p class="text-sm text-yellow-800 italic">
                    ğŸ’¡ <strong>Ù†ØµÙŠØ­Ø©:</strong> Ø§Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ù…Ø¬Ù„Ø¯ <code>/docs/adr/</code> Ø¯Ø§Ø®Ù„ Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ù„Ø¶Ù…Ø§Ù† ÙˆØµÙˆÙ„ Ø§Ù„ÙØ±ÙŠÙ‚ Ø¥Ù„ÙŠÙ‡.
                </p>
            </div>
        </section>

    </main>

    <script>
        const form = document.getElementById('adrForm');
        const preview = document.getElementById('previewArea');

        function updatePreview() {
            const id = document.getElementById('id').value.padStart(4, '0');
            const title = document.getElementById('title').value || '[Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø±Ø§Ø±]';
            const status = document.getElementById('status').value;
            const deciders = document.getElementById('deciders').value || 'Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ØªÙ‚Ù†ÙŠ';
            const date = new Date().toISOString().split('T')[0];
            const context = document.getElementById('context').value || '...';
            const decision = document.getElementById('decision').value || '...';
            const rationale = document.getElementById('rationale').value || '...';
            const consequences = document.getElementById('consequences').value || '...';

            const markdown = `# ADR ${id}: ${title}

* **Status:** ${status}
* **Date:** ${date}
* **Deciders:** ${deciders}

## Context
${context}

## Decision
${decision}

## Rationale
${rationale}

## Consequences
${consequences}`;

            preview.textContent = markdown;
        }

        // Listen for all inputs
        form.addEventListener('input', updatePreview);

        // Initial preview
        updatePreview();

        function copyToClipboard() {
            const text = preview.textContent;
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!');
            } catch (err) {
                console.error('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®', err);
            }
            document.body.removeChild(textArea);
        }

        function downloadADR() {
            const id = document.getElementById('id').value.padStart(4, '0');
            const title = document.getElementById('title').value.toLowerCase().replace(/\s+/g, '-').substring(0, 30);
            const fileName = `${id}-${title || 'adr'}.md`;
            const content = preview.textContent;
            
            const blob = new Blob([content], { type: 'text/markdown' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }
    </script>
</body>
</html>
